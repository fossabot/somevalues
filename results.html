<!DOCTYPE html>
<html>
	<head>
		<title pid="title"></title>
		<link rel="stylesheet" type="text/css" href="styles.css"/>
		<script src="main.js"></script>
	</head>
	<body>
		<header>
			<h1 pid="title"></h1>
		</header>
		<main>
			<h2 pid="results.header"></h2>
			<p pid="results.preamble"></p>
			<div id="spectrums">
			</div>
		</main>
		<script>
async function initLayout () {
  var urlParams = new URL(location).searchParams
  const fragment = new DocumentFragment()

  urlParams.forEach((lval, spectrum) => {
    var paramSpectrum = spectrumCache.find(cache => cache.spid == spectrum)
    var axis = document.createElement('div')
    axis.setAttribute('class', 'axis')

    var limg = document.createElement('img')
    limg.setAttribute('src', `${configCache.hostname}images/${paramSpectrum.left}.png`)
    limg.setAttribute('class', 'img')

    var lbar = document.createElement('div')
    lbar.setAttribute('style', `width: ${lval}%;`)
    lbar.setAttribute('class', 'lbar')
    lbar.innerText = `${lval}%`

    var rbar = document.createElement('div')
    rbar.setAttribute('style', `width: ${100 - lval}%;`)
    rbar.setAttribute('class', 'rbar')
    rbar.innerText = `${100 - lval}%`

    var rimg = document.createElement('img')
    rimg.setAttribute('src', `${configCache.hostname}images/${paramSpectrum.right}.png`)
    rimg.setAttribute('class', 'img')

    axis.appendChild(limg)
    axis.appendChild(lbar)
    axis.appendChild(rbar)
    axis.appendChild(rimg)

    fragment.appendChild(axis)
  })

  document.getElementById('spectrums').appendChild(fragment)
}

window.addEventListener('configLoad', _ => initLayout())
		</script>
		<footer>	
			<nav>
				<ul>
					<li><a href="https://github.com/deekts/political-hexadecaract/">Github</a></li>
				</ul>
			</nav>	
		</footer>
	</body>
</html>
